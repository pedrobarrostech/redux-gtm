<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Track Failure Events | ReduxGTM Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.5.2">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../docs/examples/create-mini-surveys.html" />
    
    
    <link rel="prev" href="../../docs/examples/track-page-views-react-router.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="3.2" data-chapter-title="Track Failure Events" data-filepath="docs/examples/track-failure-events.md" data-basepath="../.." data-revision="Mon Dec 05 2016 14:13:56 GMT-0500 (EST)">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="docs/api/index.html">
            
                
                    <a href="../../docs/api/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        API Reference
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="docs/api/create-middleware.html">
            
                
                    <a href="../../docs/api/create-middleware.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        createMiddleware
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/api/create-meta-reducer.html">
            
                
                    <a href="../../docs/api/create-meta-reducer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        createMetaReducer
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/api/extensions/index.html">
            
                
                    <a href="../../docs/api/extensions/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Extensions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="docs/api/extensions/logger.html">
            
                
                    <a href="../../docs/api/extensions/logger.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.1.</b>
                        
                        logger
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="docs/api/extensions/offline-web.html">
            
                
                    <a href="../../docs/api/extensions/offline-web.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.2.</b>
                        
                        offlineWeb
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="docs/api/extensions/offline-react-native.html">
            
                
                    <a href="../../docs/api/extensions/offline-react-native.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.3.</b>
                        
                        offlineReactNative
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="docs/api/event-helpers/index.html">
            
                
                    <a href="../../docs/api/event-helpers/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        EventHelpers
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="docs/api/event-helpers/create-ga-event.html">
            
                
                    <a href="../../docs/api/event-helpers/create-ga-event.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.1.</b>
                        
                        createGAevent
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="docs/api/event-helpers/create-ga-pageview.html">
            
                
                    <a href="../../docs/api/event-helpers/create-ga-pageview.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.2.</b>
                        
                        createGApageview
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="docs/api/event-helpers/create-ga-user-timing.html">
            
                
                    <a href="../../docs/api/event-helpers/create-ga-user-timing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.3.</b>
                        
                        createGAuserTiming
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="docs/api/event-definitions-map.html">
            
                
                    <a href="../../docs/api/event-definitions-map.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.5.</b>
                        
                        EventDefinitionsMap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="docs/api/event-definition.html">
            
                
                    <a href="../../docs/api/event-definition.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.6.</b>
                        
                        EventDefinition
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="docs/tutorial/index.html">
            
                
                    <a href="../../docs/tutorial/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Tutorial
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="docs/examples/index.html">
            
                
                    <a href="../../docs/examples/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Examples
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="docs/examples/track-page-views-react-router.html">
            
                
                    <a href="../../docs/examples/track-page-views-react-router.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Track Page Views When Using React Router
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.2" data-path="docs/examples/track-failure-events.html">
            
                
                    <a href="../../docs/examples/track-failure-events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Track Failure Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="docs/examples/create-mini-surveys.html">
            
                
                    <a href="../../docs/examples/create-mini-surveys.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Create Mini Surveys
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >ReduxGTM Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="track-failure-events">Track Failure Events</h2>
<p>Suppose you&apos;ve created a custom event in Google Tag Manager (GTM) for
tracking failure events <code>BOOK_TIME_OFF_FAILURE</code>. You also want to
categorize failures based on HTTP return code to get general idea of
how many of them happened on server (code 500).
So you configured GTM to label events using data layer variable <code>errorCode</code>.</p>
<p>The event definitions then will look something like this:</p>
<pre><code class="lang-js"><span class="hljs-comment">// event-definitions.js</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> eventDefinitionsMap = {
  BOOK_TIME_OFF_FAILURE: {
    eventFields: (state, action) =&gt; ({
      <span class="hljs-comment">// eventName: &apos;BOOK_TIME_OFF_FAILURE&apos;,</span>
      errorCode: action.payload.errorCode,
    }),
  },
};
</code></pre>
<p>Note, that there is no need to specify <code>eventName</code> here (commented out),
because you named your GTM event the same as the tracked redux action.
If <code>eventName</code> is omitted, the value will be taken from <code>action.type</code> by default.</p>
<p>You have to provide <code>errorCode</code> as a part of action payload when
dispatching <code>BOOK_TIME_OFF_FAILURE</code>. Needless to say, failures can be
categorized by any value other than <code>errorCode</code>.</p>
<p>Finally, create the middleware using <code>createMiddleware</code> and your event
definitions. Then apply the middleware when creating the Redux store.</p>
<pre><code class="lang-js"><span class="hljs-comment">// wherever you are creating the Redux store</span>

<span class="hljs-keyword">import</span> { createMiddleware } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux-gtm&apos;</span>;
<span class="hljs-keyword">import</span> eventDefinitionsMap <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./event-definitions&apos;</span>;
<span class="hljs-keyword">import</span> { createStore } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;redux&apos;</span>;
<span class="hljs-keyword">import</span> reducer <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;./reducer&apos;</span>;

<span class="hljs-keyword">const</span> analyticsMiddleware = createMiddleware(eventDefinitionsMap);
<span class="hljs-keyword">const</span> store = createStore(reducer, applyMiddleware(analyticsMiddleware));
</code></pre>
<p>Now the event will be pushed to the data layer every time the failure action
gets dispatched. Google Analytics will categorize this particular event based
on <code>errorCode</code> value.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../docs/examples/track-page-views-react-router.html" class="navigation navigation-prev " aria-label="Previous page: Track Page Views When Using React Router"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../docs/examples/create-mini-surveys.html" class="navigation navigation-next " aria-label="Next page: Create Mini Surveys"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"github":{"url":"https://github.com/rangle/redux-gtm"},"highlight":{},"search":{},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
